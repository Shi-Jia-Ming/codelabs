"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(e,t,s,r){void 0===r&&(r=s);var l=Object.getOwnPropertyDescriptor(t,s);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,r,l)}:function(e,t,s,r){void 0===r&&(r=s),e[r]=t[s]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&__createBinding(t,e,s);return __setModuleDefault(t,e),t};Object.defineProperty(exports,"__esModule",{value:!0}),exports.XmlTransformer=void 0;const fast_xml_parser_1=require("fast-xml-parser"),fs=__importStar(require("fs-extra")),ohos_logger_js_1=require("../log/ohos-logger.js"),shell_utils_js_1=require("../shell-utils.js"),xml_utils_js_1=require("../xml-utils.js");class XmlTransformer{constructor(e,t){this._log=ohos_logger_js_1.OhosLogger.getLogger("XMLTransform"),fs.pathExistsSync(e)||this._log.warn(`File ${e} not found. Unable to transform xml.`),this.xmlNode=new xml_utils_js_1.XMLNode(new fast_xml_parser_1.XMLParser(xml_utils_js_1.XMLOption).parse(fs.readFileSync(e,{encoding:"utf-8"}))),this.dest=t}transform(){this.addNamespace(),this.transformNode(this.xmlNode),this.outputXMLToFile()}addNamespace(){this.xmlNode.hasNamespace()&&this.xmlNode.addNamespace(shell_utils_js_1.ShellUtils.ANDROID_NS_NAME,shell_utils_js_1.ShellUtils.ANDROID_NS_VALUE)}outputXMLToFile(){fs.outputFileSync(this.dest,new fast_xml_parser_1.XMLBuilder(xml_utils_js_1.XMLOption).build(this.xmlNode.build()))}}exports.XmlTransformer=XmlTransformer;